#Import GEE Feature Collection (Somaliland kml)
geometry = ee.FeatureCollection('ft:1bzF2pepsJHoGIXn-ojYYOkOBHWtfhqzS9QLuz_l3')

# Create image collection of S-2 imagery for the perdiod 2016-2018
S2 = ee.ImageCollection('COPERNICUS/S2') \
.filterDate('2018-09-01', '2018-10-31') \
.filterBounds(geometry)

# Function to mask cloud from built-in quality band
# information on cloud
def maskcloud1(image):
    QA60 = image.select(['QA60'])
    return image.updateMask(QA60.lt(1))

# Function to calculate and add an NDVI band
def addNDVI(image):
    return image.addBands(image.normalizedDifference(['B8', 'B4']))

# Add NDVI band to image collection
S2 = S2.map(addNDVI)
# Extract NDVI band and create NDVI median composite image
NDVI = S2.select(['nd'])
NDVImed = NDVI.median(); #I just changed the name of this variable ;)

# Create palettes for display of NDVI
ndvi_pal = ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b',
'#a6d96a']

# Create a time series chart.
# plotNDVI = ui.Chart.image.seriesByRegion(S2, geometry,ee.Reducer.mean(),
# 'nd',500,'system:time_start', 'system:index') \
#               .setChartType('LineChart').setOptions({
#                 'title': 'NDVI short-term time series',
#                 'hAxis': '{title': 'Date'},
#                 'vAxis': '{title': 'NDVI'}
# })

# Display.
# print(plotNDVI)

# Display NDVI results on map
# map1.addLayer(NDVImed.clip(geometry), {'min':-0.5, 'max':0.9, 'palette': ndvi_pal}, 'NDVI')
# map1